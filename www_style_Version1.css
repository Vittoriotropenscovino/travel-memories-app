* { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }
:root{
  --primary:#6366f1; --secondary:#f97316; --success:#10b981; --danger:#ef4444;
  --dark:#0f172a; --card:#1e293b; --text:#f1f5f9; --text-secondary:#cbd5e1; --border:#334155;
}
@media (prefers-color-scheme: dark) {
  :root { --dark:#000; --card:#111; --text:#eee; --text-secondary:#aaa; --border:#222; }
}
body{ font-family: -apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,sans-serif;
  background: linear-gradient(135deg,var(--dark) 0%,var(--card) 100%); color:var(--text); min-height:100vh; overflow-x:hidden; }

/* Loading */
.loading{ position:fixed; inset:0; background:var(--dark); display:flex; align-items:center; justify-content:center; z-index:9999; transition:opacity .5s; }
.loading.hide{ opacity:0; pointer-events:none; }
.loader{ width:50px; height:50px; border:3px solid var(--border); border-top-color:var(--primary); border-radius:50%; animation:spin 1s linear infinite; }
@keyframes spin{ to{ transform:rotate(360deg);} }

/* Header */
.header{ background:rgba(30,41,59,.95); backdrop-filter:blur(10px); padding:15px 20px; position:sticky; top:0; z-index:100; border-bottom:1px solid var(--border); }
.header-content{ display:flex; justify-content:space-between; align-items:center; }
.logo{ font-size:20px; font-weight:bold; display:flex; align-items:center; gap:10px; }
.header-actions{ display:flex; gap:10px; }
.btn-icon{ background:var(--card); border:1px solid var(--border); width:40px; height:40px; border-radius:10px; display:flex; align-items:center; justify-content:center; cursor:pointer; transition:all .3s; }
.btn-icon:hover{ background:var(--primary); transform:scale(1.1); }

/* Search */
.search-container{ padding:20px; display:none; }
.search-container.active{ display:block; }
.search-input{ width:100%; padding:15px; background:var(--card); border:1px solid var(--border); border-radius:10px; color:var(--text); font-size:16px; }
.search-input:focus{ outline:none; border-color:var(--primary); }

/* Tabs */
.nav-tabs{ display:flex; padding:15px; gap:10px; overflow-x:auto; scrollbar-width:none; }
.nav-tabs::-webkit-scrollbar{ display:none; }
.nav-tab{ padding:10px 20px; background:var(--card); border:1px solid var(--border); border-radius:10px; color:var(--text-secondary); cursor:pointer; transition:all .3s; white-space:nowrap; }
.nav-tab.active{ background:var(--primary); color:#fff; border-color:var(--primary); }

/* Content */
.content{ padding:20px; padding-bottom:80px; }
.section{ display:none; }
.section.active{ display:block; animation:fadeIn .5s; }
@keyframes fadeIn{ from{opacity:0; transform:translateY(20px);} to{opacity:1; transform:translateY(0);} }

/* Stats */
.stats-grid{ display:grid; grid-template-columns:repeat(auto-fit,minmax(150px,1fr)); gap:15px; margin-bottom:30px; }
.stat-card{ background:var(--card); border:1px solid var(--border); border-radius:15px; padding:20px; text-align:center; }
.stat-value{ font-size:32px; font-weight:bold; color:var(--primary); margin-bottom:5px; }
.stat-label{ color:var(--text-secondary); font-size:14px; }

/* Memories */
.memories-grid{ display:grid; grid-template-columns:repeat(auto-fill,minmax(280px,1fr)); gap:20px; margin-bottom:20px; }
.memory-card{ background:var(--card); border:1px solid var(--border); border-radius:15px; overflow:hidden; cursor:pointer; transition:all .3s; position:relative; }
.memory-card:hover{ transform:translateY(-5px); box-shadow:0 10px 30px rgba(0,0,0,.3); }
.memory-image{ width:100%; height:200px; object-fit:cover; background:linear-gradient(135deg,var(--primary),var(--secondary)); }
.memory-content{ padding:15px; }
.memory-title{ font-size:18px; font-weight:bold; margin-bottom:5px; }
.memory-location{ color:var(--text-secondary); font-size:14px; margin-bottom:5px; }
.memory-date{ color:var(--primary); font-size:12px; }
.memory-actions{ position:absolute; top:10px; right:10px; display:flex; gap:5px; opacity:0; transition:opacity .3s; }
.memory-card:hover .memory-actions{ opacity:1; }
.action-btn{ width:30px; height:30px; background:rgba(0,0,0,.7); border:none; border-radius:50%; color:#fff; cursor:pointer; display:flex; align-items:center; justify-content:center; transition:all .3s; }
.action-btn:hover{ background:var(--primary); transform:scale(1.1); }

/* Map */
#mapContainer{ height:420px; width:100%; border-radius:15px; margin-bottom:20px; }

/* Timeline */
.timeline{ position:relative; padding-left:40px; }
.timeline::before{ content:''; position:absolute; left:15px; top:0; bottom:0; width:2px; background:var(--border); }
.timeline-item{ margin-bottom:30px; position:relative; }
.timeline-dot{ position:absolute; left:-25px; top:5px; width:12px; height:12px; background:var(--primary); border-radius:50%; box-shadow:0 0 0 3px var(--dark); }
.timeline-content{ background:var(--card); border:1px solid var(--border); border-radius:10px; padding:15px; }
.timeline-date{ color:var(--primary); font-size:12px; margin-bottom:5px; }
.timeline-title{ font-weight:bold; margin-bottom:5px; }
.timeline-description{ color:var(--text-secondary); font-size:14px; }

/* FAB */
.fab{ position:fixed; bottom:90px; right:20px; width:60px; height:60px; background:linear-gradient(135deg,var(--primary),var(--secondary)); border-radius:50%; display:flex; align-items:center; justify-content:center; cursor:pointer; box-shadow:0 5px 15px rgba(0,0,0,.3); transition:all .3s; z-index:90; border:none; color:#fff; font-size:24px; }
.fab:hover{ transform:scale(1.1) rotate(90deg); }

/* Bottom Nav */
.bottom-nav{ position:fixed; bottom:0; left:0; right:0; background:rgba(30,41,59,.95); backdrop-filter:blur(10px); border-top:1px solid var(--border); padding:10px; display:flex; justify-content:space-around; z-index:100; }
.nav-item{ background:none; border:none; color:var(--text-secondary); padding:10px; cursor:pointer; transition:all .3s; display:flex; flex-direction:column; align-items:center; gap:5px; }
.nav-item.active{ color:var(--primary); }
.nav-label{ font-size:11px; }

/* Modal */
.modal{ position:fixed; inset:0; background:rgba(0,0,0,.8); display:flex; align-items:center; justify-content:center; z-index:1000; opacity:0; pointer-events:none; transition:opacity .3s; padding:20px; }
.modal.active{ opacity:1; pointer-events:all; }
.modal-content{ background:var(--card); border-radius:20px; max-width:500px; width:100%; max-height:90vh; overflow-y:auto; transform:scale(.9); transition:transform .3s; }
.modal.active .modal-content{ transform:scale(1); }
.modal-header{ padding:20px; border-bottom:1px solid var(--border); display:flex; justify-content:space-between; align-items:center; }
.modal-title{ font-size:20px; font-weight:bold; }
.close-btn{ background:none; border:none; color:var(--text); font-size:24px; cursor:pointer; }
.modal-body{ padding:20px; }

/* Form */
.form-group{ margin-bottom:20px; }
.form-label{ display:block; margin-bottom:8px; color:var(--text-secondary); font-size:14px; }
.form-input,.form-textarea{ width:100%; padding:12px; background:var(--dark); border:1px solid var(--border); border-radius:10px; color:var(--text); font-size:16px; }
.form-input:focus,.form-textarea:focus{ outline:none; border-color:var(--primary); }
.form-input:focus-visible,.form-textarea:focus-visible{ box-shadow:0 0 0 3px rgba(99,102,241,.5); }
.form-textarea{ resize:vertical; min-height:100px; }

/* Buttons */
.btn{ padding:12px 24px; border:none; border-radius:10px; font-weight:bold; cursor:pointer; transition:all .3s; }
.btn-primary{ background:linear-gradient(135deg,var(--primary),var(--secondary)); color:#fff; }
.btn-primary:hover{ transform:translateY(-2px); box-shadow:0 5px 15px rgba(0,0,0,.3); }
.btn-block{ width:100%; }

/* Empty State */
.empty-state{ text-align:center; padding:60px 20px; }
.empty-icon{ font-size:80px; margin-bottom:20px; opacity:.5; }
.empty-title{ font-size:24px; margin-bottom:10px; }
.empty-text{ color:var(--text-secondary); margin-bottom:20px; }
/* Settings (continuazione) */
.settings-list{ display:grid; gap:15px; }
.setting-item{ background:var(--card); border:1px solid var(--border); border-radius:15px; padding:20px; display:flex; justify-content:space-between; align-items:center; cursor:pointer; transition:all .3s; }
.setting-item:hover{ border-color:var(--primary); }
.setting-label{ font-weight:bold; }
.toggle{ width:50px; height:26px; background:var(--border); border-radius:13px; position:relative; cursor:pointer; transition:all .3s; }
.toggle.active{ background:var(--primary); }
.toggle-knob{ position:absolute; top:3px; left:3px; width:20px; height:20px; background:#fff; border-radius:50%; transition:all .3s; }
.toggle.active .toggle-knob{ transform:translateX(24px); }
.danger{ color:var(--danger); }
.select{ background:var(--card); color:var(--text); border:1px solid var(--border); border-radius:10px; padding:8px 12px; }

/* Toast */
.toast{ position:fixed; bottom:100px; left:50%; transform:translateX(-50%) translateY(100px); background:var(--card); border:1px solid var(--primary); padding:15px 25px; border-radius:10px; opacity:0; transition:all .3s; z-index:2000; }
.toast.show{ opacity:1; transform:translateX(-50%) translateY(0); }

/* Upload */
.image-upload{ border:2px dashed var(--border); border-radius:10px; padding:30px; text-align:center; cursor:pointer; transition:all .3s; }
.image-upload:hover{ border-color:var(--primary); background:rgba(99,102,241,.1); }
.image-preview{ width:100%; max-height:200px; object-fit:cover; border-radius:10px; margin-top:10px; display:none; }

/* Aggiunte per multi-foto e detail */
.previews-container { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px; }
.preview-img { width: 100px; height: 100px; object-fit: cover; border-radius: 10px; cursor: pointer; } /* Cliccabile per rimuovere? Opzionale */
.carousel { display: flex; overflow-x: auto; gap: 10px; margin-bottom: 20px; scrollbar-width: thin; }
.carousel img { width: 100%; max-height: 300px; object-fit: cover; border-radius: 10px; cursor: zoom-in; }
.detail-info { margin: 10px 0; color: var(--text-secondary); }
.detail-description { white-space: pre-wrap; color: var(--text); }

/* Lazy placeholder */
.lazy-placeholder { background: var(--border); height: 200px; width: 100%; border-radius: 10px; }